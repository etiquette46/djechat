<!DOCTYPE html>
<html>
<head>
    <title>Profile | DJEsocials</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav><h1>DJEsocials</h1><ul><li><a href="index.html">Home</a></li><li><a href="friends.html">Friends</a></li><li><a href="conversations.html">Chats</a></li><li><a href="profile.html" class="active">Profile</a></li></ul></nav>

    <div class="container" style="text-align:center;">
        <div class="card">
            <h1 id="nick-display" style="color:var(--primary)">@...</h1>
            <p id="name-display" style="color:var(--text-dim)">Real Name</p>
            <p style="background:#333; display:inline-block; padding:5px 15px; border-radius:8px; font-size:0.8rem;">Permanent Handle</p>
            <hr style="border:0; border-top:1px solid var(--border); margin:20px 0;">
            <button id="logout" style="background:#ff4b2b; color:white;">Logout</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyDTL2zEm3QrFPs8Mctnx889WH0DcM65nFw", authDomain: "djechat-730a0.firebaseapp.com", projectId: "djechat-730a0", storageBucket: "djechat-730a0.firebasestorage.app", messagingSenderId: "843688111797", appId: "1:843688111797:web:adf9bf0b67f8b3f89e98fc" };
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        auth.onAuthStateChanged(async user => {
            if (!user) return window.location.href = 'login.html';
            const d = await getDoc(doc(db, "users", user.uid));
            document.getElementById('nick-display').innerText = `@${d.data().nickname}`;
            document.getElementById('name-display').innerText = user.displayName;
        });

        document.getElementById('logout').onclick = () => signOut(auth);
    </script>
</body>
</html>
